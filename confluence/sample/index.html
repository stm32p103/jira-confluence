!function(r){var n={};function s(t){if(n[t])return n[t].exports;var e=n[t]={i:t,l:!1,exports:{}};return r[t].call(e.exports,e,e.exports,s),e.l=!0,e.exports}s.m=r,s.c=n,s.d=function(t,e,r){s.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:r})},s.r=function(t){Object.defineProperty(t,"__esModule",{value:!0})},s.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="",s(s.s=0)}([function(t,e,r){"use strict";r.r(e);function u(i,o,u,a){return new(u=u||Promise)(function(t,e){function r(t){try{s(a.next(t))}catch(t){e(t)}}function n(t){try{s(a.throw(t))}catch(t){e(t)}}function s(e){e.done?t(e.value):new u(function(t){t(e.value)}).then(r,n)}s((a=a.apply(i,o||[])).next())})}function a(r,n){var s,i,o,t,u={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return t={next:e(0),throw:e(1),return:e(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(s)throw new TypeError("Generator is already executing.");for(;u;)try{if(s=1,i&&(o=2&e[0]?i.return:e[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,e[1])).done)return o;switch(i=0,o&&(e=[2&e[0],o.value]),e[0]){case 0:case 1:o=e;break;case 4:return u.label++,{value:e[1],done:!1};case 5:u.label++,i=e[1],e=[0];continue;case 7:e=u.ops.pop(),u.trys.pop();continue;default:if(!(o=0<(o=u.trys).length&&o[o.length-1])&&(6===e[0]||2===e[0])){u=0;continue}if(3===e[0]&&(!o||e[1]>o[0]&&e[1]<o[3])){u.label=e[1];break}if(6===e[0]&&u.label<o[1]){u.label=o[1],o=e;break}if(o&&u.label<o[2]){u.label=o[2],u.ops.push(e);break}o[2]&&u.ops.pop(),u.trys.pop();continue}e=n.call(r,u)}catch(t){e=[6,t],i=0}finally{s=o=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}}var o=(n.prototype.next=function(t){void 0===t&&(t=this.limit);var e=this.start+t,r=null;return e<t&&(r=new n({start:e,limit:t})),r},n);function n(t){void 0===t&&(t={start:0,limit:25}),Object.assign(this,t)}var c=(s.prototype.toUrl=function(t,e){var r=[this.base,"rest/api/content",t.cid,"property"].join("/");return t.key&&(r=r+"/"+t.key),r+=this.toQueryString(e)},s.prototype.searchUrl=function(t){return[this.base,"rest/api/content/search"].join("/")+this.toQueryString(t)},s.prototype.format=function(t,e){var r=null;return null!==e&&(r={cid:t,id:e.id,key:e.key,value:e.value,version:{when:e.version.when,number:e.version.number}}),r},s.prototype.toQueryString=function(t){var e="";if(t){var r=[];for(var n in t)r.push(n+"="+t[n]);0<r.length&&(e=e+"?"+r.join("&"))}return e},s.prototype.request=function(n,s,i){return u(this,void 0,void 0,function(){var e,r;return a(this,function(t){switch(t.label){case 0:return r={url:s,type:n,success:function(t){e=t}},void 0!==i&&(r.data=JSON.stringify(i),r.headers={"Content-Type":"application/json"}),[4,AJS.$.ajax(r)];case 1:return t.sent(),[2,e]}})})},s.prototype.restFindAll=function(s,i){return void 0===i&&(i={}),u(this,void 0,void 0,function(){var e,r,n;return a(this,function(t){switch(t.label){case 0:r=this.toUrl({cid:s},i),t.label=1;case 1:return t.trys.push([1,3,,4]),[4,this.request("get",r)];case 2:return e=t.sent(),[3,4];case 3:if(404!==(n=t.sent()).status)throw new Error(n);return e=null,[3,4];case 4:return[2,e]}})})},s.prototype.restFindByKey=function(s,i,o){return void 0===o&&(o={}),u(this,void 0,void 0,function(){var e,r,n;return a(this,function(t){switch(t.label){case 0:r=this.toUrl({cid:s,key:i},o),t.label=1;case 1:return t.trys.push([1,3,,4]),[4,this.request("get",r)];case 2:return e=t.sent(),[3,4];case 3:if(404!==(n=t.sent()).status)throw new Error(n);return e=null,[3,4];case 4:return[2,e]}})})},s.prototype.restCreate=function(r,n,s){return u(this,void 0,void 0,function(){var e;return a(this,function(t){switch(t.label){case 0:return e=this.toUrl({cid:r}),[4,this.request("post",e,{key:n,value:s})];case 1:return[2,t.sent()]}})})},s.prototype.restUpdate=function(r,n,s,i){return u(this,void 0,void 0,function(){var e;return a(this,function(t){switch(t.label){case 0:return e=this.toUrl({cid:r,key:n}),[4,this.request("put",e,{key:n,value:s,version:{number:i}})];case 1:return[2,t.sent()]}})})},s.prototype.restDelete=function(n,s){return u(this,void 0,void 0,function(){var e,r;return a(this,function(t){switch(t.label){case 0:e=this.toUrl({cid:n,key:s}),t.label=1;case 1:return t.trys.push([1,3,,4]),[4,this.request("delete",e)];case 2:return t.sent(),[3,4];case 3:if(404!==(r=t.sent()).status)throw new Error(r);return[3,4];case 4:return[2]}})})},s.prototype.restSearch=function(t,e,s){return u(this,void 0,void 0,function(){var e,r,n;return a(this,function(t){switch(t.label){case 0:e=null,r=this.searchUrl(s),t.label=1;case 1:return t.trys.push([1,3,,4]),[4,this.request("get",r)];case 2:return e=t.sent(),[3,4];case 3:if(400!==(n=t.sent()).status)throw new Error(n);return[3,4];case 4:return[2,e]}})})},s.prototype.getAll=function(n,s){return void 0===s&&(s=new o),u(this,void 0,void 0,function(){var e,r=this;return a(this,function(t){switch(t.label){case 0:return[4,this.restFindAll(n,{start:s.start,limit:s.limit})];case 1:return[2,{results:(e=t.sent()).results.map(function(t){return r.format(n,t)}),range:new o({start:e.start,limit:e.limit,size:e.size})}]}})})},s.prototype.getByCql=function(n,s,i){return void 0===i&&(i=new o),u(this,void 0,void 0,function(){var e,r=this;return a(this,function(t){switch(t.label){case 0:return[4,this.restSearch(n,s,{cql:n,expand:"version,metadata.properties."+s,start:i.start,limit:i.limit})];case 1:return[2,{results:(e=t.sent()).results.filter(function(t){return void 0!==t.metadata.properties[s]}).map(function(t){return r.format(t.id,t.metadata.properties[s])}),range:new o({start:e.start,limit:e.limit,size:e.size})}]}})})},s.prototype.get=function(r,n){return u(this,void 0,void 0,function(){var e;return a(this,function(t){switch(t.label){case 0:return[4,this.restFindByKey(r,n)];case 1:return e=t.sent(),[2,this.format(r,e)]}})})},s.prototype.set=function(s,i,o){return u(this,void 0,void 0,function(){var e,r,n;return a(this,function(t){switch(t.label){case 0:return[4,this.restFindByKey(s,i,{expand:"version"})];case 1:return null===(e=t.sent())?[3,3]:(n=1+e.version.number,[4,this.restUpdate(s,i,o,n)]);case 2:return r=t.sent(),[3,5];case 3:return[4,this.restCreate(s,i,o)];case 4:r=t.sent(),t.label=5;case 5:return[2,this.format(s,r)]}})})},s.prototype.delete=function(e,r){return u(this,void 0,void 0,function(){return a(this,function(t){switch(t.label){case 0:return[4,this.restDelete(e,r)];case 1:return t.sent(),[2]}})})},s);function s(t){this.base=t}AJS.$(document).ready(function(){return u(void 0,void 0,void 0,function(){var e,r,n,s,i,o;return a(this,function(t){switch(t.label){case 0:return e=new c(AJS.params.baseUrl),r=AJS.params.pageId,n="sample",console.log("---------------------------"),[4,e.get(r,n)];case 1:return s=t.sent(),console.log(s),console.log("---------------------------"),[4,e.getAll(r)];case 2:return i=t.sent(),console.log(i),console.log("---------------------------"),[4,e.set(r,n,{sample:"created"})];case 3:return s=t.sent(),console.log(s),console.log("---------------------------"),[4,e.set(r,n,{sample:"updated"})];case 4:return s=t.sent(),console.log(s),[4,e.getByCql("space=TEST and type=page",n)];case 5:return o=t.sent(),console.log(o),[2]}})})})}]);